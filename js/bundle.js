!function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){function n(t,e,a){var n=i(e);s(e),r(e,n),f=a,o(f),d(f),c(f),l()}function i(t){var e=topojson.mesh(t,t.objects.outline,function(t,e){return t===e});g.scale(1).translate([0,0]);var a=y.bounds(e),n=1/Math.max((a[1][0]-a[0][0])/h,(a[1][1]-a[0][1])/m),i=[(h-n*(a[1][0]+a[0][0]))/2,(m-n*(a[1][1]+a[0][1]))/2];return g.scale(n).translate(i),e}function r(t,e){C.append("path").datum(e).attr("d",y).attr("class","subunit-boundary")}function s(t){C.selectAll(".subunit").data(topojson.feature(t,t.objects.mumbai).features).enter().append("path").attr("class",function(t){return"subunit ac-"+t.properties.id}).attr("d",y)}function o(t){function e(e){if(0!=e.properties.id)var a=_.where(t,{id:e.properties.id})[0].party;return Object.keys(b).indexOf(a)==-1?cc.grey:b[a]}C.selectAll(".subunit").style("fill",e)}function d(t){function e(t,e,n,i){$("#legend").append("<div class='legend-item legend-item-"+t+"'></div>"),$(".legend-item-"+t).append("<div class='party'></div>"),$(".legend-item-"+t+" .party").append("<div class='swatch' style='background:"+e+"'></div>"),$(".legend-item-"+t+" .party").append("<div class='result-container'></div>"),$(".legend-item-"+t+" .result-container").append("<div class='name'>"+n+"</div>"),$(".legend-item-"+t+" .result-container").append("<div class='result'></div>"),$(".legend-item-"+t+" .result-container .result").append("<div class>"+i+" seats ("+Math.round(i/a*100*10)/10+"%)</div>")}var a=t.length,n=Object.keys(b),i=[];n.forEach(function(a,n){var r=_.where(t,{party:a}).length;i.push(r),e(n,b[a],a,r)});var r=i.reduce(function(t,e){return t+e},0);r-a!=0&&e(n.length,cc.grey,"Other",a-r)}function c(t){function e(e){d3.select(this).moveToFront(),d3.selectAll(".place-label").moveToFront();var a=e.properties.id;$(".tip").show(),$(".subunit").removeClass("highlight"),$(".ac-"+a).addClass("highlight");var n=_.where(t,{id:a.toString()})[0],i=Object.keys(b).indexOf(n.party);$(".tip").append("<div class='name'>Ward No. "+n.id+"</div>"),$(".tip").append("<table></table>"),$(".tip table").append("<tr class='party'></tr>"),$(".tip table .party").append("<td>Party</td>"),$(".tip table .party").append("<td><div class='swatch' style='background:"+(i==-1?cc.grey:b[n.party])+"'></div><div class='party-name'>"+v(n.party)+"</div></td>"),$(".tip table").append("<tr class='candidate'></tr>"),$(".tip table .candidate").append("<td>Candidate</td>"),$(".tip table .candidate").append("<td>"+v(n.name)+"</td>")}function a(t){var e=t.pageY,a=$(".tip").height(),n=$("#map").offset().top,i=e-a-20,r=t.pageX,s=$(".tip").width(),o=$("#map").width()+$("#map").offset().left,d=r-s/2;$(".tip").css({top:i<n?e+10:i,left:d<10?10:d+s+10>o?o-s-10:d})}function n(t){d3.selectAll(".subunit").moveToBack(),$(".subunit").removeClass("highlight"),$(".tip").empty().hide()}$("body").append("<div class='tip'></div>"),$(".tip").hide(),C.selectAll(".subunit").on("mouseover",e).on("mouseout",n),$(".subunit").mousemove(a)}function l(){$("#map").append("<div class='control zoom'>Zoom out</div>"),$(".control.zoom").css("top",$("#map").offset().top+45).addClass("inactive"),C.selectAll(".subunit").on("click",u)}function p(t){var e=t.node(),a=e.getBBox();return[a.x+a.width/2,a.y+a.height/2]}function u(t){var e,a,n=d3.select(".subunit-boundary"),i=p(n);if(t&&x!==t){var r=y.centroid(t);e=r[0],a=r[1],j=3,x=t,$(".zoom.out").removeClass("inactive")}else e=i[0],a=i[1],j=1,x=null,$(".zoom.out").addClass("inactive");C.selectAll("path").classed("active",x&&function(t){return t===x}),C.transition().duration(750).attr("transform","translate("+h/2+","+m/2+")scale("+j+")translate("+-e+","+-a+")").style("stroke-width",1/j+"px"),$(".control.zoom").addClass(1==j?"inactive":"active").removeClass(1==j?"active":"inactive"),1!=j&&d3.select(".control.zoom").on("click",u)}function v(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}a(1);var h=$("#map").width(),m=$("#map").height(),g=d3.geoMercator(),b={"Shiv Sena":cc.red,"Bharatiya Janata Party":cc.orange,"Indian National Congress":cc.blue,"Nationalist Congress Party":cc.green},y=d3.geoPath().projection(g).pointRadius(2),w=d3.select("#map").append("svg").attr("width",h).attr("height",m),C=w.append("g");d3.queue().defer(d3.json,"data/geodata.json").defer(d3.csv,"data/data.csv").await(n);var x,j=1},function(t,e){}]);
//# sourceMappingURL=bundle.js.map